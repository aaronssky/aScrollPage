/*! Grunt Created by aron_阿伦 on 2015-01-30 */
!function(){function a(){i=this.docEleH,j="all "+this.duration/1e3+"s",k=1/(1-this.scale)}function b(a){this.ele=a,this.ele.style.height=document.documentElement.clientHeight+"px"}function c(){var a="translate3d(0px,",b=",0)";0==arguments.length?this.style[m+"Transform"]=a+0+"px"+b:1==arguments.length?this.style[m+"Transform"]=a+arguments[0]+"px"+b:2==arguments.length?(this.style[m+"Transform"]=a+arguments[0]+"px"+b,this.style[m+"Transition"]=arguments[1]):3==arguments.length&&(this.style[m+"Transform"]=a+arguments[0]+"px"+b+" scale("+arguments[2]+")",this.style[m+"Transition"]=arguments[1]),this.style[m+"TransitionTimingFunction"]="ease-in-out"}function d(a,b){for(var c=a.getAttribute("class"),d=c.split(" "),e=0;e<d.length;e++)if(d[e]==b)return!1;a.setAttribute("class",d.join(" ")+" "+b)}function e(a,b){for(var c=a.getAttribute("class"),d=c.split(" "),e=[],f=0;f<d.length;f++)d[f]!=b&&e.push(d[f]);a.setAttribute("class",e.join(" "))}function f(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):a["on"+b]=c}function g(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent?a.detachEvent("on"+b,c):delete a["on"+b]}function h(){for(var a=navigator.userAgent,b=new Array("Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"),c=!0,d=0;d<b.length;d++)if(a.indexOf(b[d])>0){c=!1;break}return c}var i,j,k,l=document.createElement("div").style,m=function(){for(var a,b=["webkitT","MozT","msT","OT","t"],c=0,d=b.length;d>c;c++)if(a=b[c]+"ransform",a in l)return b[c].substr(0,b[c].length-1);return!1}();b.prototype={init:function(a){this.initData(a?a:{}),this.bindEvent(),f(document,h()?"mousedown":"touchstart",function(a){a.preventDefault()})},initData:function(a){this.pages=this.ele.querySelectorAll(".page"),this.docEleH=document.documentElement.clientHeight,this.pageNow=1,this.usingScale=!0,this.isPc=h(),this.moved=!1,this.isMoving=!1,this.fn_afterSliding=[],this.fn_touchSliding=[],this.fn_startSlideToPage=[],this.scrollSuccess=!1,this.duration=500,this.scale=.8,this.threshold=100,this.fn_initCallback=function(){console.log("init plugin success")},this.setData(a)},setData:function(b){function c(a,c,d){return a in b&&b[a][c]&&"function"==typeof b[a][c]?b[a][c]:d}for(var d=0;d<this.pages.length;d++)this.fn_touchSliding.push(function(a){return c("fn_touchSliding",a,function(){console.log("默认事件--手指触摸滑动当前页开始,准备切换到第 "+(a+1)+" 页")})}(d)),this.fn_startSlideToPage.push(function(a){return c("fn_startSlideToPage",a,function(){console.log("默认事件--自动切换至第 "+(a+1)+" 页")})}(d)),this.fn_afterSliding.push(function(a){return c("fn_afterSliding",a,function(){console.log("默认事件--完成滑动到第 "+(a+1)+" 页")})}(d));"duration"in b?this.duration=b.duration:"","usingScale"in b?this.usingScale=!!b.usingScale:"","scale"in b&&parseFloat(b.scale)>0&&parseFloat(b.scale)<1?this.scale=parseFloat(b.scale):"","threshold"in b?this.threshold=b.threshold:"","fn_initCallback"in b?this.fn_initCallback=b.fn_initCallback:"",this.fn_initCallback(),a.call(this)},bindEvent:function(){function a(a){d.mousedown.call(d,a,c)}function b(a){d.mouseup.call(d,a,c)}function c(a){d.mousemove.call(d,a)}var d=this;f(this.ele,this.isPc?"mousedown":"touchstart",a),f(this.ele,this.isPc?"mouseup":"touchend",b)},mousedown:function(a,b){if(this.moved)return!1;a.stopPropagation(),this.setTransition(""),this.setPagesIndex(),this.originClientY=this.isPc?a.clientY:a.targetTouches[0].clientY;f(this.ele,this.isPc?"mousemove":"touchmove",b)},mouseup:function(a,b){if(!this.moved)return g(this.ele,this.isPc?"mousemove":"touchmove",b),!1;if(this.isMoving)return!1;var d=this;this.isMoving=!0,this.setTransition(j);var e=this.pages[this.pageNow-1].style[m+"Transform"].split("px, ");clearTimeout(this.timer),e&&Math.abs(e[1])>this.threshold/(this.usingScale?k:1)?("next"==this.direction?(this.usingScale?c.call(this.pages[this.pageNow-1],-i/k,j,this.scale):c.call(this.pages[this.pageNow-1],-i,j),c.call(this.pages[this.pageNow],0),d.pageNow++):(this.usingScale?c.call(this.pages[this.pageNow-1],i/k,j,this.scale):c.call(this.pages[this.pageNow-1],i,j),c.call(this.pages[this.pageNow-2],0),d.pageNow--),this.scrollSuccess=!0,this.fn_startSlideToPage[this.pageNow-1]()):("next"==this.direction&&this.pageNow<this.pages.length?(c.call(this.pages[this.pageNow-1],0),c.call(this.pages[this.pageNow],i)):this.pageNow>1&&(c.call(this.pages[this.pageNow-1],0),c.call(this.pages[this.pageNow-2],-i)),this.scrollSuccess=!1),this.revertCallback(),g(this.ele,this.isPc?"mousemove":"touchmove",b)},mousemove:function(a){return this.isMoving?!1:(a.preventDefault(),this.isPc?"":a.clientY=a.targetTouches[0].clientY,void(this.originClientY<a.clientY&&this.pageNow>1?("prev"!=this.direction?this.fn_touchSliding[this.pageNow-2]():"",this.moved=!0,this.direction="prev",this.usingScale?c.call(this.pages[this.pageNow-1],(a.clientY-this.originClientY)*(1-this.scale),"",1-(1-this.scale)*(a.clientY-this.originClientY)/i):c.call(this.pages[this.pageNow-1],a.clientY-this.originClientY),d(this.pages[this.pageNow-2],"active"),c.call(this.pages[this.pageNow-2],-i-(this.originClientY-a.clientY)),this.pageNow<this.pages.length?e(this.pages[this.pageNow],"active"):""):this.originClientY>a.clientY&&this.pageNow<this.pages.length?("next"!=this.direction?this.fn_touchSliding[this.pageNow]():"",this.moved=!0,this.direction="next",this.usingScale?c.call(this.pages[this.pageNow-1],(a.clientY-this.originClientY)*(1-this.scale),"",1+(1-this.scale)*(a.clientY-this.originClientY)/i):c.call(this.pages[this.pageNow-1],a.clientY-this.originClientY),d(this.pages[this.pageNow],"active"),c.call(this.pages[this.pageNow],i-(this.originClientY-a.clientY)),this.pageNow>1?e(this.pages[this.pageNow-2],"active"):""):(this.direction="",1==this.pageNow?(e(this.pages[1],"active"),c.call(this.pages[0],0)):this.pageNow==this.pages.length&&(c.call(this.pages[this.pages.length-1],0),e(this.pages[this.pages.length-2],"active")))))},revertPages:function(){for(var a=0;a<this.pages.length;a++)this.pages[a].style[m+"Transform"]="",this.pages[a].style[m+"Transition"]="",this.pages[a].style.zIndex="",a+1!=this.pageNow&&e(this.pages[a],"active")},setTransition:function(a){for(var b=0;b<this.pages.length;b++)this.pages[b].style[m+"Transition"]=a},setPagesIndex:function(){this.pageNow>1&&this.pageNow<this.pages.length?(this.pages[this.pageNow-1].style.zIndex=0,this.pages[this.pageNow-2].style.zIndex=1):this.pageNow==this.pages.length&&(this.pages[this.pageNow-1].style.zIndex=0,this.pages[this.pageNow-2].style.zIndex=1)},_autoScrollPage:function(a){if("next"==this.direction&&(this.pageNow>=this.pages.length||this.isMoving))return!1;if("prev"==this.direction&&(this.pageNow<=1||this.isMoving))return!1;this.setPagesIndex(),this.isMoving=!0,a.call(this);var b=this;return setTimeout(function(){c.call(b.pages[b.pageNow-1],0,j)},30),this.scrollSuccess=!0,this.revertCallback(),this.fn_startSlideToPage[this.pageNow-1](),!0},toNextPage:function(){return this.direction="next",this._autoScrollPage(function(){c.call(this.pages[this.pageNow],i),d(this.pages[this.pageNow],"active"),this.usingScale?c.call(this.pages[this.pageNow-1],-i/k,j,this.scale):c.call(this.pages[this.pageNow-1],-i,j),this.pageNow++})},toPrevPage:function(){return this.direction="prev",this._autoScrollPage(function(){this.usingScale?c.call(this.pages[this.pageNow-1],i/k,j,this.scale):c.call(this.pages[this.pageNow-1],i,j),d(this.pages[this.pageNow-2],"active"),c.call(this.pages[this.pageNow-2],-i),this.pageNow--})},revertCallback:function(){var a=this;this.timer=setTimeout(function(){a.revertPages(),a.moved=!1,a.isMoving=!1,a.scrollSuccess?a.fn_afterSliding[a.pageNow-1]():"",this.timer=0,a.direction="",a.scrollSuccess=!1},this.duration)}},window.ScrollPage=b}(void 0);